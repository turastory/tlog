<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Gatsby Starter Blog RSS Feed]]></title><description><![CDATA[이런 저런 개발 이야기]]></description><link>https://turastory.com</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 06 Mar 2022 09:07:09 GMT</lastBuildDate><item><title><![CDATA[Gradle 프로젝트에 새로운 Source Set 추가하기 (with Kotlin Gradle DSL)]]></title><description><![CDATA[Gradle에서는 모듈 내에서도 소스셋을 나누어 사용할 수 있다. Intellij를 사용했을 때는 기본적으로는 다음과 같이 ,  두 가지의 source set…]]></description><link>https://turastory.com/source-set-in-kotlin-gradle-dsl/</link><guid isPermaLink="false">https://turastory.com/source-set-in-kotlin-gradle-dsl/</guid><pubDate>Sun, 27 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Gradle에서는 모듈 내에서도 소스셋을 나누어 사용할 수 있다. Intellij를 사용했을 때는 기본적으로는 다음과 같이 &lt;code class=&quot;language-text&quot;&gt;main&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt; 두 가지의 source set이 디폴트로 주어지지만, 상황에 따라 여분의 소스셋을 추가하고 싶을 때도 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 296px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3887c410a71dde00686efefc185d78b5/b1a44/main-and-test.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 106.32911392405065%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAADiUlEQVQ4y32TSW8bRxCF+TtyCpCccsjFkLjMvg855AxnuIkUSYmiSIqirN3W5lgK4izwJTF8CRDkmr/5Bd0CtZnJ4U119XS/6tf1OqfbLs1Ol6Kmc3h9x49//Ena6TEa7zLaneD4IUXNQDGsB5R081n+FDnx0SxHbqqkTdpbY7xKlVqSEtUzREHxT5AUVP2B7L9Ic+LHErrlUFBUrKBMszfAsyw5J0gNx8ULK6im/QXpU/LcciCq1+oZThASZy3u/voH6+Yjh8cnvLm45N37W37+9Tc6vU3yiiaJ//eEIhHSCpqBbpiU4hbfzK4wbBfNsHDDCpYXyHXriiZJ86r+OFY0yZNbddGyiKKhF/LsHr1ha36I5YeE1RpRXCdOG1TrGVGSkrbaMm+0O5iO90j4jFRGm6JhsTi/4vT2FzqbQ45Pz9iZTBlPZ+ztH7A53GayN2f/9aHMLdd/TvjyokuGRd50KRQV2RzhhrWSSlE3pVRxRcsmCYj8C0Ixabo+SaNFUdX5+voTX13+Tq07oD8Y0u0PpT8FLM8nqEQkWQPbC6QLVp5QtRzZgJJm8F1nh28HC/wko7vZJ2t1JFobPSlRWEqY3w3KEqsJTVtKFOM4SQnDKgXVYK2osF5SZXxVKEmrCUV5RZddLmoruryULE4hnuP1x8/8cHvGZjdj7+CIhWjA4kDG8WTGaDyRXt2d7q324fLdrpcUefG6W2GQFYlCFd0JCaIqQVSjXIulNwWCShWvHD1/KYJUTAov+bU6s+NzkjghihO8KCFKGlRqiZQspOZVjYJ2L1nk8p0bJrmSZiJQUHSCSoxhe0S1lLNPf7N2+5npbM7VzQ03796zNRqTL+kouiVR0iyW+5fImWWXe3jogY0eOlihQ7EW8f3ODLPiYQeB/K8FFppvyTUiGqEj5x85XHJ+u8wSQbuC1wqJejEbu13CxML7YGLdqXTmXbYXOwwX20xP9pgcz4h6Nbn+KUfOa4a8RNiOiPsZbrOMfaRjXii0pm1mx3O29keSeHw4kYXdRojfKkuIvSsJ/VblYUE67BN12lhpgJnYmHUXM3EwYhs783AaPnbqYWf+PeGS/WkVUbk7GxBkPlc/nXP54ZjRvMvi7RGvL444eHso4+x0LuUfXZ3IsZTspgEv4TfK+M2IcuIz6K8zXagMhiH1wQadUZfW9gYbOz2yQYt00KSz06O51cHLQv4Fgl0Ungq26OcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;main and test source sets&quot;
        title=&quot;main and test source sets&quot;
        src=&quot;/static/3887c410a71dde00686efefc185d78b5/b1a44/main-and-test.png&quot;
        srcset=&quot;/static/3887c410a71dde00686efefc185d78b5/c26ae/main-and-test.png 158w,
/static/3887c410a71dde00686efefc185d78b5/b1a44/main-and-test.png 296w&quot;
        sizes=&quot;(max-width: 296px) 100vw, 296px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;나는 유닛 테스트와 통합 테스트를 서로 다른 소스셋으로 구분하고 싶어서 기존의 &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt;는 그대로 둔 채로 &lt;code class=&quot;language-text&quot;&gt;integrationTest&lt;/code&gt;라는 소스셋을 새로 추가했다. &lt;code class=&quot;language-text&quot;&gt;build.gradle.kts&lt;/code&gt;에서 아래와 같이 새로운 소스셋을 추가할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Create a new sourceSet for integration tests&lt;/span&gt;
sourceSets &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;integrationTest&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        java &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            compileClasspath &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; main&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;output &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; test&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;output
            runtimeClasspath &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; main&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;output &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; test&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;output
            &lt;span class=&quot;token function&quot;&gt;srcDir&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;src/integrationTest/kotlin&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; integrationTestImplementation &lt;span class=&quot;token keyword&quot;&gt;by&lt;/span&gt; configurations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getting&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;extendsFrom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;configurations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;testImplementation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

configurations&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;integrationTestRuntimeOnly&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;extendsFrom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;configurations&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;testRuntimeOnly&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 주목할 만한 부분은 &lt;code class=&quot;language-text&quot;&gt;classpath&lt;/code&gt;를 설정하는 부분이다. 기존에 테스트를 작성할 때는 별도의 설정 없이 &lt;code class=&quot;language-text&quot;&gt;main&lt;/code&gt; 소스셋의 클래스들을 가져다 사용할 수 있었다. 이는 &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt; 소스셋에서 &lt;code class=&quot;language-text&quot;&gt;main&lt;/code&gt;의 클래스패스를 참조하기 때문에 그렇다. 마찬가지로 &lt;code class=&quot;language-text&quot;&gt;integrationTest&lt;/code&gt;에서도 테스트를 위한 디펜던시들에 접근해야 하기 때문에 &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt;의 빌드 결과를 새로운 소스셋의 클래스패스에 추가해주었다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.gradle.org/current/dsl/org.gradle.api.tasks.SourceSetOutput.html&quot;&gt;공식 문서&lt;/a&gt;에서 SourceSet의 output에 대한 설명을 찾을 수 있다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A collection of all output directories (compiled classes, processed resources, etc.) - notice that SourceSetOutput extends FileCollection.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;여기까지 작성했다면 IDE의 파일 트리에 새로운 소스셋이 추가된 것을 확인할 수 있다. 그런데 Intellij가 해당 소스셋을 테스트 소스셋으로 인식하지 않는다.&lt;/p&gt;
&lt;p&gt;이를 위해서는 idea 플러그인을 추가하고, &lt;code class=&quot;language-text&quot;&gt;testSourceDirs&lt;/code&gt;에 새로 추가한 소스셋을 등록하면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;plugins &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    idea
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Register integrationTest sourceSet as a test sourceSet.&lt;/span&gt;
idea&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; testSources &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; testSourceDirs
    testSources&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;project&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sourceSets&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getByName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;integrationTest&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;java&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;srcDirs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// This line is redundant, but I just keep it as a reference.&lt;/span&gt;
    testSources&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;project&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sourceSets&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getByName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;integrationTest&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;resources&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;srcDirs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    testSourceDirs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; testSources
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 286px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a53c37a0a88681b319ec85f78714b5bc/357e3/test-source-set.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 82.91139240506328%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAADF0lEQVQ4y4WUWU8bSRRG+++MNNIIJQEb416rN2946bbbC6GxAZtgNyYJtlkCgRAmIZqHeZmXmad5nD95Rl1gNEuUPBzdrqrvfnVburcU2yuQ0wy6ewd0Oj18z8MtlXGLJYkuHEzHxbBdvFKZzUaALmycQonedoxbLMszv1yRPkqlFrCWUzm7/pnmb3/hjGfcXl1xfDLj0+d7bj7c8u7yPecXl1xeXfPh9o7Tswtm81Oub25ZnJ7L/ZP5KdkNDSVn6qiOwLA0ftg74ll3B2GY6MJFcwW1VkipUUW1LXRXYPoOouihuzaG52D4DlbBk/upRnGbBezApRaHVGoOTk/HutIQI4sgblHp1WjETbrDLZqDCCf0EQ0XO/CeEMHDOj1TloJwEFGK6lixjfh1A/NcZZgccHI5Y3h8wHiWkMynbPZqiMAjLSTN/SepqbJ0Fg0Hq+6wrNis2XKdXpbGJWbdxnyK9lNly2oVJ3iosDlo47eKVOM2i7t7tsf7NLZDOsMtWrsdot0OYT+ivd+T39Fel2i3i9cqPpo9Vug0fezQoxGH2O1N4sji5KbCYlZg53CL8fyIyTxh9OYVk8WRjP1kl/FswuFsQrFTkfmpT4qiuhaaJySqa2LaGhvWc1w/Q85SyRh58raB7i81Fvqj/mso5WqDtfU8J9efSd59pNhoMTpI6Gz12d0fMT1+g+0VpWY9r0uyj/FrKMIrkFF1dnYGrNz/yWpyQTLcYzSecDhJmEyP8UoVMhsqOd2Q0/AtlGxeI6ebaJZNVnhkDMHKizV+evaCldUMz7M5pEYzWFf17xvWw5ZMOLv7haObLwRbMa/fvuUwOWK2OCNotVldz7OhmU+m30JRLUFWM2hHHX78+Dsrwzn9qEsvHtDf25cPQvq7y4TvVmhVHUTNxShbGFUfo+mQj1TyJQOtZGFUBE7Dxw9LOHWfpd6qujL+F9mH6Sx2Ry+pd0PEwEL8kcN6r3IwPSQ5ncreSxZTSblblXrZd+H/UZYjIzfSbm+72K8Eoi+ovwzlo1CPQ4KdlsSPSg/6wP/XA7Ecvb8BbdySfdz8gzUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;recognize as test source set&quot;
        title=&quot;recognize as test source set&quot;
        src=&quot;/static/a53c37a0a88681b319ec85f78714b5bc/357e3/test-source-set.png&quot;
        srcset=&quot;/static/a53c37a0a88681b319ec85f78714b5bc/c26ae/test-source-set.png 158w,
/static/a53c37a0a88681b319ec85f78714b5bc/357e3/test-source-set.png 286w&quot;
        sizes=&quot;(max-width: 286px) 100vw, 286px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;마지막으로 해결해야 하는 문제는 새로 만든 소스셋에서 main이 아닌 다른 소스셋(가령 test)의 코드를 가져다쓸 수 있게 하는 것이다. 지금 이대로 사용할 경우 유닛 테스트에서 만든 테스트 데이터를 &lt;code class=&quot;language-text&quot;&gt;integrationTest&lt;/code&gt; 소스셋에서는 사용할 수 없다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;task(&quot;integrationTest&quot;, Test::class) {
    testClassesDirs = sourceSets[&quot;integrationTest&quot;].output
    classpath = sourceSets[&quot;integrationTest&quot;].runtimeClasspath
}


val integrationTestImplementation: Configuration by configurations.getting {
    extendsFrom(configurations.testImplementation.get())
}

configurations {
    getByName(&quot;integrationTestRuntimeOnly&quot;) {
        extendsFrom(configurations.testRuntimeOnly.get())
    }
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;References&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests&quot;&gt;https://docs.gradle.org/current/userguide/java_testing.html#sec:configuring_java_integration_tests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://rio-kim.github.io/testing/2017/12/20/gradle_test_sourceset_config/&quot;&gt;https://rio-kim.github.io/testing/2017/12/20/gradle_test_sourceset_config/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Pandas Cheatsheet]]></title><description><![CDATA[By use case ###Filter rows ###Convert multi-index series to dataframe https://stackoverflow.com/questions/44142591/converting-a-pandas-multi…]]></description><link>https://turastory.com/snippets/pandas-cheatsheet/</link><guid isPermaLink="false">https://turastory.com/snippets/pandas-cheatsheet/</guid><pubDate>Sun, 27 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;By use case&lt;/h2&gt;
&lt;p&gt;###Filter rows&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;column_name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; some_value&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;column_name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;some_values&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;~&lt;/span&gt;df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;column_name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isin&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;some_values&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cond1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cond2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cond3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; s&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;s &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; some_value&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;###Convert multi-index series to dataframe&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;Series&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;unstack&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/44142591/converting-a-pandas-multi-index-series-to-a-dataframe-by-using-second-index-as-c&quot;&gt;https://stackoverflow.com/questions/44142591/converting-a-pandas-multi-index-series-to-a-dataframe-by-using-second-index-as-c&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;###Convert index of dataframe to a column&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;column_name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;index
&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;insert&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; column_name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;index&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;reset_index&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;level&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; inplace&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;###Rename columns&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rename&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;columns&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; category&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;item_code&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/20461165/how-to-convert-index-of-a-pandas-dataframe-into-a-column&quot;&gt;https://stackoverflow.com/questions/20461165/how-to-convert-index-of-a-pandas-dataframe-into-a-column&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;###Split a single row into multiple rows&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;DataFrame&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;explode
Series&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;explode&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/50731229/split-cell-into-multiple-rows-in-pandas-dataframe&quot;&gt;https://stackoverflow.com/questions/50731229/split-cell-into-multiple-rows-in-pandas-dataframe&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;###Group by - sort within groups&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;python&quot;&gt;&lt;pre class=&quot;language-python&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# We need to sort within depth2, so group by depth2 and aggergate.&lt;/span&gt;
agg &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; df&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groupby&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;depth1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;depth2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;depth2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;agg&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;total_size&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &apos;size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# sort within the groups, take the most N rows.&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# Note: pass group_keys=False to avoid receiving indices in subsequent apply() function.&lt;/span&gt;
count &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; agg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groupby&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;depth1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; group_keys&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;lambda&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sort_values&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;by&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;total_size&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; ascending&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;iloc&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;# Optional - join the most N rows to a single row&lt;/span&gt;
result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;reset_index&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;level&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;depth2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;groupby&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;category&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; group_keys&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;lambda&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;,&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;join&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;depth2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/27842613/pandas-groupby-sort-within-groups&quot;&gt;https://stackoverflow.com/questions/27842613/pandas-groupby-sort-within-groups&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Mapping Functions&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;map vs apply vs applymap vs transform&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;헷갈리는 Pandas의 매핑 함수들에 대해 정리해보았다.&lt;/p&gt;
&lt;p&gt;###&lt;a href=&quot;https://pandas.pydata.org/docs/reference/api/pandas.core.groupby.GroupBy.apply.html&quot;&gt;GroupBy.apply&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Apply function func group-wise and combine the results together.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;group에 속한 Row를 가지고 있는 &lt;code class=&quot;language-text&quot;&gt;DataFrame&lt;/code&gt;을 함수 인자로 받는다. 다음과 같이 apply에 넘기는 lambda 함수에서 print를 해보면 알 수 있다.&lt;/li&gt;
&lt;li&gt;함수에서는 DataFrame, Series, Scalar 등 다양한 값을 리턴할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;###&lt;a href=&quot;https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.apply.html&quot;&gt;DataFrame.apply&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Apply a function along input axis of DataFrame.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;DataFrame의 row나 column을 함수 인자로 받는다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;axis: 0 or index - 각각의 column에 적용&lt;/li&gt;
&lt;li&gt;axis: 1 or columns - 각각의 row에 적용&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;함수에서는 Series나 Scalar를 리턴해야 한다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;result_type&lt;/code&gt;을 통해 함수에서 리턴하는 값들이 어떻게 묶이는지 결정할 수 있다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;###&lt;a href=&quot;https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.applymap.html&quot;&gt;DataFrame.applymap&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Apply a function to a Dataframe elementwise&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;DataFrame의 모든 값을 각각 함수 인자로 받는다.&lt;/li&gt;
&lt;li&gt;함수에서는 Scalar를 리턴해야 한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Element-wise?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;DataFrame.apply&lt;/code&gt; - 전체 row나 column에 적용됨.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;DataFrame.applymap&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Series.apply&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Series.map&lt;/code&gt; - 각각의 요소에 적용됨.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;###&lt;code class=&quot;language-text&quot;&gt;Series.apply&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;Series.map&lt;/code&gt;의 차이점&lt;/p&gt;
&lt;p&gt;둘 모두 개별 요소에 함수가 적용되지만(element-wise), 리턴할 수 있는 형태가 다르다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Series.apply&lt;/code&gt;에 전달되는 함수는 개별 요소나 &lt;code class=&quot;language-text&quot;&gt;Series&lt;/code&gt;를 리턴할 수 있음&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Series.map&lt;/code&gt;은 개별 요소만 리턴할 수 있음&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;-&gt; &lt;code class=&quot;language-text&quot;&gt;Series.map&lt;/code&gt;은 변환 전/후의 차원이 유지되는 반면 &lt;code class=&quot;language-text&quot;&gt;Series.apply&lt;/code&gt;는 변환 후의 차원이 변할 수 있음. (Series -&gt; DataFrame이 될 수 있다)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[유용한 Git 레시피 몇 가지]]></title><description><![CDATA[커밋 이름 변경 바로 이전 커밋의 메시지 변경 과거 N번째 커밋의 메시지 변경 이후 원하는 커밋에 pick -> reword 후 메시지 작성 작업 내용 저장]]></description><link>https://turastory.com/snippets/useful-git-recipes/</link><guid isPermaLink="false">https://turastory.com/snippets/useful-git-recipes/</guid><pubDate>Wed, 16 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;커밋 이름 변경&lt;/h2&gt;
&lt;h3&gt;바로 이전 커밋의 메시지 변경&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;git commit --amend&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;과거 N번째 커밋의 메시지 변경&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;git rebase -i HEAD~N&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이후 원하는 커밋에 pick -&gt; reword 후 메시지 작성&lt;/p&gt;
&lt;h2&gt;작업 내용 저장&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;# 현재 작업 영역에 있는 모든 내용 저장
git stash push

# stash할 때 메시지 지정
git stash push -m &amp;lt;message&gt;

# 한 개의 파일만 stash (~ Git 2.13)
git stash push &amp;lt;path-to-file&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[TTF vs OTF 차이점]]></title><description><![CDATA[Glossaries Bezier Curve 베지어 곡선 = N개의 점으로부터 만들어지는 곡선 2차 배지어 곡선 (Quadratic Bezier) = 2개의 점 사용 3차 배지어 곡선 (Cubic Bezier) = 3개의 점 사용 TTF 198…]]></description><link>https://turastory.com/snippets/ttf-vs-otf/</link><guid isPermaLink="false">https://turastory.com/snippets/ttf-vs-otf/</guid><pubDate>Wed, 16 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Glossaries&lt;/h2&gt;
&lt;h3&gt;Bezier Curve&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;베지어 곡선 = N개의 점으로부터 만들어지는 곡선&lt;/li&gt;
&lt;li&gt;2차 배지어 곡선 (Quadratic Bezier) = 2개의 점 사용&lt;/li&gt;
&lt;li&gt;3차 배지어 곡선 (Cubic Bezier) = 3개의 점 사용&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;TTF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;1980년대 후반 개발&lt;/li&gt;
&lt;li&gt;TTF = True Type Font&lt;/li&gt;
&lt;li&gt;MS와 Apple이 Adobe에 대항하기 위해 제작&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Quadratic Bezier&lt;/strong&gt; 사용&lt;/li&gt;
&lt;li&gt;OTF보다 빠름&lt;/li&gt;
&lt;li&gt;모든 응용 소프트웨어에서 사용 가능&lt;/li&gt;
&lt;li&gt;라이트/볼드/이탤릭 등의 가족체를 하나로 묶을 수 &lt;strong&gt;없음&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;-&gt; 문서 작업에 적합&lt;/p&gt;
&lt;h2&gt;OTF&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;1996년 개발&lt;/li&gt;
&lt;li&gt;OTF = Open Type Font&lt;/li&gt;
&lt;li&gt;MS와 Adobe가 제작&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cubic Bezier&lt;/strong&gt; 사용&lt;/li&gt;
&lt;li&gt;TTF보다 섬세함&lt;/li&gt;
&lt;li&gt;모든 응용 소프트웨어에서 사용 가능&lt;/li&gt;
&lt;li&gt;라이트/볼드/이탤릭 등의 가족체를 하나로 묶을 수 &lt;strong&gt;있음&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;-&gt; 그래픽 디자인, 출력물에 적합&lt;/p&gt;</content:encoded></item><item><title><![CDATA[kubeconfig 정리]]></title><description><![CDATA[GitHub Actions를 사용해 배포 스크립트를 작성하다가 kubeconfig 파일에 관한 부분이 헷갈려 정리해보았다. What is kubeconfig kubeconfig…]]></description><link>https://turastory.com/snippets/kubeconfig/</link><guid isPermaLink="false">https://turastory.com/snippets/kubeconfig/</guid><pubDate>Wed, 16 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;GitHub Actions를 사용해 배포 스크립트를 작성하다가 kubeconfig 파일에 관한 부분이 헷갈려 정리해보았다.&lt;/p&gt;
&lt;h3&gt;What is kubeconfig&lt;/h3&gt;
&lt;p&gt;kubeconfig 파일은 클러스터, 유저, 네임스페이스, 인증 등 *&lt;em&gt;클러스터 접근&lt;/em&gt;에 대한 정보를 담고 있는 파일이다.&lt;/p&gt;
&lt;h3&gt;Where is it&lt;/h3&gt;
&lt;p&gt;기본적으로는 &lt;code class=&quot;language-text&quot;&gt;$HOME/.kube/config&lt;/code&gt;에 위치한다. 명령을 실행할 때는 디폴트로 이 파일을 사용하고, &lt;code class=&quot;language-text&quot;&gt;KUBECONFIG&lt;/code&gt; 환경 변수를 사용하거나 &lt;code class=&quot;language-text&quot;&gt;--kubeconfig&lt;/code&gt; 플래그를 사용해 직접 명시할 수 있다.&lt;/p&gt;
&lt;h3&gt;How to use it (in deployment)&lt;/h3&gt;
&lt;p&gt;GitHub Actions를 이용해서 쿠버네티스에 배포를 하려면 마찬가지로 클러스터에 대한 접속 정보가 필요하기 때문에 이를 위해서 kubeconfig를 사용한다. 어떤 액션을 사용하는지는 자유겠지만, 나는 &lt;a href=&quot;https://github.com/Azure/k8s-set-context&quot;&gt;k8s-set-context&lt;/a&gt;라는 액션을 사용하기로 했다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/220f47b321f97f4769bc00cd5375bb2f/bf286/k8s-set-context.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.58227848101266%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAv0lEQVQY05WQW2rDMBBFtYG+UiepbVkPy5ZkObEVQiHt/vd1itVS6F/zcbjDMByGK8ww48LCmDJ+vqCHxNNrzeNu4+1uRNUYVEq0/QnlM9Kd0CGj/Mq+sXdiEFVtGN5XhmvG5w/G9ZNuXIr4KB2Htv83m1TsDh0yBsw6Y+cr7nxjWG7YeEHaCWkjjfZlVi7RmvCL7Kci2p7a16ak2DrbelT9RKvHQmfDd/YRaQOdjWiXyo00/mcXeK4aHl6Of/gCbduGy+nmh28AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;k8s-set-context&quot;
        title=&quot;k8s-set-context&quot;
        src=&quot;/static/220f47b321f97f4769bc00cd5375bb2f/f058b/k8s-set-context.png&quot;
        srcset=&quot;/static/220f47b321f97f4769bc00cd5375bb2f/c26ae/k8s-set-context.png 158w,
/static/220f47b321f97f4769bc00cd5375bb2f/6bdcf/k8s-set-context.png 315w,
/static/220f47b321f97f4769bc00cd5375bb2f/f058b/k8s-set-context.png 630w,
/static/220f47b321f97f4769bc00cd5375bb2f/40601/k8s-set-context.png 945w,
/static/220f47b321f97f4769bc00cd5375bb2f/78612/k8s-set-context.png 1260w,
/static/220f47b321f97f4769bc00cd5375bb2f/bf286/k8s-set-context.png 1688w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;문서를 보면 kubeconfig 파일의 &lt;strong&gt;내용&lt;/strong&gt;이 들어가야 한다고 적혀있다. 그런데, 이게 Azure의 쿠버네티스 클러스터 서비스인 AKS 내용만 있어서 구체적으로 어떤 내용이 들어가야 하는지 몰랐다.&lt;/p&gt;
&lt;p&gt;방법은 사실 허탈할 정도로 간단하다. 다음과 같이 kubeconfig 파일의 내용을 복사한 다음, GitHub 설정에 secret으로 등록하고 사용하면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cat ~/.kube/config | pbcopy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;경우에 따라 base64 인코딩이 필요하기도 한데, 이럴 때는 쉘에 base64 유틸이 내장되어 있으니 이를 사용하면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cat ~/.kube/config | base64 | pbcopy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Jetpack Compose - remember()와 method reference 사용 시 주의점]]></title><description><![CDATA[TL;DR Compose에서 참조로 인한 골치아픈 문제를 피하려면 가급적 method reference 보다 lambda를 사용하자. Jetpack Compose를 활용해서 UI를 만들다가, 와 method reference…]]></description><link>https://turastory.com/jetpack-compose-remember-caution/</link><guid isPermaLink="false">https://turastory.com/jetpack-compose-remember-caution/</guid><pubDate>Tue, 15 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;h3&gt;TL;DR&lt;/h3&gt;
&lt;p&gt;Compose에서 참조로 인한 골치아픈 문제를 피하려면 가급적 method reference 보다 lambda를 사용하자.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Jetpack Compose를 활용해서 UI를 만들다가, &lt;code class=&quot;language-text&quot;&gt;remember()&lt;/code&gt;와 method reference을 사용하면서 생긴 문제에 대해 정리해보았다.&lt;/p&gt;
&lt;h2&gt;Glossaries&lt;/h2&gt;
&lt;h3&gt;&lt;code class=&quot;language-text&quot;&gt;remember()&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;remember()&lt;/code&gt;는 Compose 런타임에서 활용할 수 있는 저장 및 캐시 매커니즘으로,
기본적으로는 저장된 값을 사용하되 키로 넘겨진 값이 변경되었을 경우 calculation block 내의 코드가 다시 실행된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Always use the same instance (guaranteed to be retained across recomposition)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; manager &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; remember &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CoordinatesManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Use the same instance unless &apos;key&apos; changed (may not be retained across recomposition)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; manager &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;remember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;CoordinatesManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Lambda expression&lt;/h3&gt;
&lt;p&gt;Lambda expression - 람다 표현식은 파라미터를 받아서 값을 리턴하는 코드다.&lt;/p&gt;
&lt;p&gt;함수와 무척 유사하지만, 이름이 없고 클로저로서 해당 코드 블록을 감싸고 있는 상위 영역의 환경에 접근이 가능하다. 이 환경 - environment에는 변수, 함수, 리시버 등이 포함된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;
button&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onClick&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// number is captured in this block&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;number&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Method reference&lt;/h3&gt;
&lt;p&gt;Method reference는 함수를 참조하는 것으로 람다와 비슷하게 함수가 필요한 곳에서 사용할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; number &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;printNumber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;number&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

button&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;printNumber&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Lambda expression과 Method reference의 실제 구현상 가장 큰 차이점은 다음과 같다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Method reference을 사용하면, &lt;strong&gt;생성되는 시점&lt;/strong&gt;의 환경을 캡처해서 사용하게 된다.&lt;/li&gt;
&lt;li&gt;Lambda expression을 사용하면, &lt;strong&gt;사용하는 시점&lt;/strong&gt;의 환경을 캡처해서 사용하게 된다.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;일반적으로는 lambda 대신 method reference를 사용해도 별 문제가 없는데, &lt;strong&gt;코드에서 접근하는 대상(객체나 리시버)이 달라지면 이야기가 달라진다.&lt;/strong&gt;
다음 문단에서 좀 더 자세히 살펴보자.&lt;/p&gt;
&lt;h3&gt;Case&lt;/h3&gt;
&lt;p&gt;Compose를 사용하면서 문제가 발생한 상황은 이렇다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;SomeLayout&lt;/code&gt;은 UI가 화면에 그려지는 시점에, 관련된 좌표와 크기를 가져오기 위한 콜백을 받는다. 내부에서는 items를 뿌려서 보여주고 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Composable&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SomeLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    items&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Item&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    register&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;LayoutCoordinates&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; Unit
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;Box&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        Modifier&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onGloballyPositioned&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;it&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        Column &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            items&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; item &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;뷰를 그리는 쪽은 다음과 같이 작성했다. 이 때 &lt;code class=&quot;language-text&quot;&gt;SomeLayout&lt;/code&gt;으로 넘겨지는 콜백에 method reference를 사용했다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token annotation builtin&quot;&gt;@Composable&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MainUi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; MainUiState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; structureKey &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items3
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; it&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;flatten&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;joinToString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;val&lt;/span&gt; manager &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;remember&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;structureKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;CoordinatesManager&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;coords&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; LayoutCoordinates&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        manager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;coords&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    Columns &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;SomeLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;register&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;SomeLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;register&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;SomeLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt;register&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;여기서 &lt;code class=&quot;language-text&quot;&gt;manager&lt;/code&gt;를 가져올 때 &lt;code class=&quot;language-text&quot;&gt;remember&lt;/code&gt;의 키로 &lt;code class=&quot;language-text&quot;&gt;structureKey&lt;/code&gt;를 넘겨준 것을 확인할 수 있다.
레이아웃 구조가 변경되면 &lt;code class=&quot;language-text&quot;&gt;manager&lt;/code&gt;가 들고 있는 좌표 값들을 새로 갱신해야 해서 범위를 이렇게 잡았다.&lt;/p&gt;
&lt;h3&gt;Issue&lt;/h3&gt;
&lt;p&gt;얼핏 보아서는 별로 문제가 되지 않을 것처럼 보이는 코드이지만, method reference의 특성 때문에 상태가 변경되었을 때 문제가 발생한다.&lt;/p&gt;
&lt;p&gt;기대하는 동작은, 전체적인 레이아웃의 구조가 변경되었을 때 &lt;code class=&quot;language-text&quot;&gt;manager&lt;/code&gt;가 다시 생성되고, 각각의 레이아웃이 다시 그려지면 새로 생성된 &lt;code class=&quot;language-text&quot;&gt;manager&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;register&lt;/code&gt; 함수를 호출하는 것이다.&lt;/p&gt;
&lt;p&gt;하지만 실제로는 레이아웃이 다시 그려졌을 때 &lt;strong&gt;이전에 참조했던 &lt;code class=&quot;language-text&quot;&gt;manager&lt;/code&gt;의 &lt;code class=&quot;language-text&quot;&gt;register&lt;/code&gt; 함수를 호출&lt;/strong&gt;하게 된다.
앞서 나왔던 method reference의 특성에 따라 초기 시점의 &lt;code class=&quot;language-text&quot;&gt;manager&lt;/code&gt;를 캡처해서 사용하고 있는 것이다.&lt;/p&gt;
&lt;h3&gt;Resolution&lt;/h3&gt;
&lt;p&gt;그렇다면 람다를 사용하면 문제가 해결될까? &lt;strong&gt;그렇다.&lt;/strong&gt; 다음과 같이 사용하면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;Columns &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;SomeLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;it&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;SomeLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;it&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;SomeLayout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;it&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;다른 방법은 없을까? Method reference를 사용한다면 결국 생성 시점의 환경을 캡처한다는 문제를 어떻게 핸들링하는지가 핵심이다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;remember&lt;/code&gt;에 키를 넘기지 않고 동일한 인스턴스를 계속 사용하면서, 갱신이 필요할 때 인스턴스를 다시 생성하는 대신 별도의 초기화를 진행하는 식으로 푸는 수밖에는 없을 것 같다.&lt;/p&gt;
&lt;p&gt;근데 그렇게 머리아프게 고민할 시간에 그냥 람다를 쓰자.. method reference를 사용했을 때 가독성이 좋은 몇몇 부분들이 있어 여러 방면으로 혼용했었는데,
Compose를 사용할 때는 이런 문제를 피하기 위해서라도 가급적 람다를 사용해야겠다.&lt;/p&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;p&gt;좀 더 디테일한 구현상 차이는 &lt;a href=&quot;https://proandroiddev.com/kotlin-lambda-vs-method-reference-fdbd175f6845&quot;&gt;Lambda vs Method Reference&lt;/a&gt; 포스트를 참고.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Kotlin 환경에서 Spring Data JPA를 사용할 때 Entity에서 Set 사용 시 ClassCastException 문제]]></title><description><![CDATA[Kotlin 환경에서 Spring Data JPA 사용할 때 Entity에 , 를 사용하면 내부 구현이 EmptySet으로 되어 있어서 () merge…]]></description><link>https://turastory.com/snippets/kotlin-spring-data-jpa-with-set/</link><guid isPermaLink="false">https://turastory.com/snippets/kotlin-spring-data-jpa-with-set/</guid><pubDate>Thu, 10 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Kotlin 환경에서 Spring Data JPA 사용할 때 Entity에 &lt;code class=&quot;language-text&quot;&gt;setOf()&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;Collections.toSet()&lt;/code&gt;를 사용하면 내부 구현이 EmptySet으로 되어 있어서 (&lt;code class=&quot;language-text&quot;&gt;Set&amp;lt;Nothing&gt;&lt;/code&gt;) merge할 때 &lt;code class=&quot;language-text&quot;&gt;ClassCastException&lt;/code&gt;이 발생한다.&lt;/p&gt;
&lt;p&gt;대신 &lt;code class=&quot;language-text&quot;&gt;HashSet&lt;/code&gt;을 사용하면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 선언&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; options&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; Set&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;OtherModel&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hashSetOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 리스트 변환&lt;/span&gt;
model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;options &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toHashSet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;동일한 문제가 &lt;code class=&quot;language-text&quot;&gt;listOf()&lt;/code&gt;에 대해서도 발생하는 것을 확인했다. 리스트를 사용할 경우에는 &lt;code class=&quot;language-text&quot;&gt;listOf()&lt;/code&gt; 대신 &lt;code class=&quot;language-text&quot;&gt;arrayListOf()&lt;/code&gt;를 사용하면 된다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;kotlin&quot;&gt;&lt;pre class=&quot;language-kotlin&quot;&gt;&lt;code class=&quot;language-kotlin&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// 선언&lt;/span&gt;
&lt;span class=&quot;token annotation builtin&quot;&gt;@Entity&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; options&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; List&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;OtherModel&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;arrayListOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</content:encoded></item><item><title><![CDATA[Android Studio에서 keystore 생성 시 주의점]]></title><description><![CDATA[Android Studio에서 릴리즈를 위해 keystore를 생성할 때, 키스토어의 패스워드와 키의 패스워드가 다르면 아래와 같은 오류가 발생합니다. 혹시라도 동일한 문제를 겪고 있다면 두 패스워드에 동일한 걸 사용해보세요.]]></description><link>https://turastory.com/snippets/android-studio-keystore/</link><guid isPermaLink="false">https://turastory.com/snippets/android-studio-keystore/</guid><pubDate>Thu, 10 Feb 2022 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Android Studio에서 릴리즈를 위해 keystore를 생성할 때, 키스토어의 패스워드와 키의 패스워드가 다르면 아래와 같은 오류가 발생합니다.&lt;/p&gt;
&lt;p&gt;혹시라도 동일한 문제를 겪고 있다면 두 패스워드에 동일한 걸 사용해보세요.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e69bc95ebc7c6bdbe9b45db5161e423b/cab8c/error-pkcs12.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 96.20253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAADq0lEQVQ4y5WT31MaVxTHDwTaihVYEpJKTBtTkEisiooNLLDA/mIxYhsVVpPiqBgIiCjxx2CgaZ46mUxf8t5/of9D89TXPnXqUzvTRtpMZzrTmT7Eck/nLmBrxkzaM/Odc++5dz73e8/dBb+fhSDLwZX+92H2ZgrmZtOQTi3+J83PqXDz43mg4ZuYhKGhYYBioQw221la07OBkDsU5FiWDftZNhwIsuEAGwgHohwXiEVaY63Wkj8U5AKhIDdiNBoNFBDhYgDhUEQ7weG4aBMF+UASFRSFOBGFOM0oi3GMRCTkuDjKkrZ2LEnU8h/e0bGrB9/9CKEgp4OJ8UkddXfh/IV+gZcbbWBTFBQSlxTCsiKpV7PkyaNV4vfHiCwppHWgQtp7j65d+4ClpiZ91/XgHR2nQAPD2K4KvHTYAUqiQgReJgklSQ6+Vslv31fI0vIdEosIHWizvfeFy+Wm1zwzNjZxDDQyDOPheenYIb1eKBzHB7sq/v7Ui0+//QYff/kVRkNhlKUprS0dh07nAE9NtYDeNtB6EtjKCs5M38DZpIRLS6uoqhnkYxJ2+vwycJwCx7z/chhrASVRaQq8rDU+GpVQVZcwNb+AfFREWqeiLXmtQ4GXGhQi8HIzoUwj1VRiGleXs7iyvIZTUzPYqdP+tl/7yOl0nQJkbJpDWUrg/JzazOeKuLO9h4W761golHC9WMbK1jZulDaxWChhOrVIlPgNCj5yuU5xaLfbPRGOb2Qyq1itftrc2LiHO7v7WKns4dbWLu7s7GOt/lCbFwplrNcfkpWVHPKvAtrOnvPwUaGRjMu4XVpvrt/JYnEti5t387hZyONGPqeNS7k1LOdzWMiukBkljiIvHjld7lOAPV2emDR9yKb3kL1VawZv1QiXeUC4zGck/EmdhG/XCLtYI6HbdU3sYq0ZWNjHmDL3YuDypX+ArVdmDL0G8IQ/yv5i3/8JmWqjyVSfEaqe3Z/J4Oe/kqFHz4l57xmxVQ9JZ42pPcfrC/f/Gu59U2h9Nj49DA+Pag4tXQZXVEr+8GG6ij61Rnzp++hL1zRNqi115m0RWosmUn86+96hv55hZMSrB5PJBAY9GAHg/OVLfcnBPlvZ7bBsDTgs99xtDfS25HacUGXworXsfK9PBb2hDwDeMHWZoBN6vQ66AeAcANDFfgC48hrRPe8CgB0AekCnPwMvhd5isb5ltTLdZrPlbbPZ/ApZjrPFYu1mrEyXTqfTYF88fgKnhe5/6kT8DSOewTOdfXw7AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;&amp;quot;PKCS12 error&amp;quot;&quot;
        title=&quot;&amp;quot;PKCS12 error&amp;quot;&quot;
        src=&quot;/static/e69bc95ebc7c6bdbe9b45db5161e423b/f058b/error-pkcs12.png&quot;
        srcset=&quot;/static/e69bc95ebc7c6bdbe9b45db5161e423b/c26ae/error-pkcs12.png 158w,
/static/e69bc95ebc7c6bdbe9b45db5161e423b/6bdcf/error-pkcs12.png 315w,
/static/e69bc95ebc7c6bdbe9b45db5161e423b/f058b/error-pkcs12.png 630w,
/static/e69bc95ebc7c6bdbe9b45db5161e423b/cab8c/error-pkcs12.png 744w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/315b9695ef002f3d163368b0a75f82d6/cab8c/error-final-block.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 96.20253164556962%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAADyklEQVQ4y5VTS28bVRQ+njpAnNb2OKElqQtN5Ufqtkmcl+MZ22PP02Pn4Sau7cSoKZWd5mESp01F40QKrOBHsIJdF2wQi0pVhViwYgESCx4bhFBjyhKJRY3vQffGCQ0JQhzp0zn3fGe++80ZDYyHBJBiMlzq9cDsTA6ys3nI5+YPUcgX4XomC9NTM6x+kbuRLcDM9RtAIzg4BNeu9gOUS8vgcnXSHicKUX80IomiGAtHxJggClEhLsnCuBgRQmJEkOMK6zFOjIWjEUmIRqSBtrY2KxVIxBWAaDTObujpOe/SVOMHXTNRU5NEU5NI60RcRVMxGSRJxhaP+zzLvwcHh/p+/O5niEYkC4wMj1mou3Nnz/WqilFvPdDUNZPICY3M54rk4ZPPyBfff0VWFldJXFKIoaeIppqkNdu4cuWaSE2NjY5zEBwcpoJWnnf1qYq+dyCYNNIkFIqQhx9/RO5/UicLH35DHj96RMLhKKFc61I6+9zr9dPXPDU8NMJBMMgE23ieDyiKfujQ0FMYi8q4Ud3AL79+ip9+/i3u7r7HepSjazlw6PH4FGpq6N8Edc1ktxu6iXFJwZvFIi4vltk+WzzFMcGjDp18QFX0Ol22qhhNVTFoZsvP5eYxO1tgQgd9VTFI6+M0PB7v34JDhw5dAUXW60kjjSlzspkyJ3EiPU1rvP1WiWFyIoPp1BTrT6Sn6S6pcMN7ksOuzq5AIq7Ws7N5XLqz2ly6s4JvV6q0xvW1u1guLWGlss7OK8sVrKyuk7lCEeWE1vD7+o47dLUcmuYU3rpVbm5ubmGlUsXqxn2kdXlxBVdXq7i2dg83Nx9gqbxM0ukMqkqy4fWe4NDJuwKqrNWNeBxTitycThqYUhW8/eY8VhZLuLa0iDcLeZw0dMykkjQTXYqhrugNj8d/gsMztoCsTe5F5h6gML/dDBdqRJirkUhxhyQWdkli4V1WhwtbDMJcrSkWd1A2s899Fy+8KDhiAeCt3VYIxDKlX7tqvyBfqzddtT3SWdsj9neekr73n5GrHzxjdWetTijn2toj/M5vOD63/Wd/98vqvuAoB/39g8yho93qTehTP4XyWzia3yGj+W2aGcYK+zg4tzhCe4lU7g+P+zX661kHBoIc2Gw2sHLQBgBnL15wT112u9b9PY4NX4/jnr8FX/c+/D1HcPfyeee65w13ATirGwBesrXb4CA4zgIdANAFAJTsBYBL/wE68zoAvAoAZ8DCnYJ/BOdwOF9xOvkOu91x2m63nz6ej/YcDmcH7+TbLRYLE0NEOCks/xNH4i8AnMKzoIz5qwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;&amp;quot;Final block error&amp;quot;&quot;
        title=&quot;&amp;quot;Final block error&amp;quot;&quot;
        src=&quot;/static/315b9695ef002f3d163368b0a75f82d6/f058b/error-final-block.png&quot;
        srcset=&quot;/static/315b9695ef002f3d163368b0a75f82d6/c26ae/error-final-block.png 158w,
/static/315b9695ef002f3d163368b0a75f82d6/6bdcf/error-final-block.png 315w,
/static/315b9695ef002f3d163368b0a75f82d6/f058b/error-final-block.png 630w,
/static/315b9695ef002f3d163368b0a75f82d6/cab8c/error-final-block.png 744w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[이터널 리턴 전적 검색 사이트를 만들어보았다]]></title><description><![CDATA[er.op.gg 사이트 작년 10월, 블랙서바이벌: 영원회귀 - 지금은 이터널 리턴이라고 부르는 게임이 막 세상의 관심을 받던 시기. 당시 나는 산업기능요원 의무로…]]></description><link>https://turastory.com/eternal-return-site/</link><guid isPermaLink="false">https://turastory.com/eternal-return-site/</guid><pubDate>Sat, 18 Dec 2021 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://er.op.gg&quot;&gt;er.op.gg 사이트&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;작년 10월, &lt;strong&gt;블랙서바이벌: 영원회귀&lt;/strong&gt; - 지금은 &lt;strong&gt;이터널 리턴&lt;/strong&gt;이라고 부르는 게임이 막 세상의 관심을 받던 시기. 당시 나는 산업기능요원 의무로 1달간 훈련소에 다녀와야 했는데, 훈련소에서 나오면 어떤 것들을 할지 곰곰히 생각을 해봤다.&lt;/p&gt;
&lt;p&gt;고민 끝에 내린 결론은 뭐든 간에 만드는 것보다 연구하는 걸 해보고 싶다는 생각이었다. 그렇게 생각했다.&lt;/p&gt;
&lt;p&gt;근데 막상 나오니까 또 생각이 바뀌더라. 경제적인 것들에 대한 관심과 함께 내가 만든 사이트나 제품으로 돈을 벌어보고 싶다는 욕심이 생겼다. 친구와 같이 이야기를 하면서, 이터널 리턴이라는 게임의 통계 사이트를 한 번 만들어보기로 했다. 경쟁 대상이 되는 사이트가 아직 존재하지 않았기 때문에 심리적인 부담도 그리 크지는 않았다.&lt;/p&gt;
&lt;p&gt;마침 훈련소에 가기 전 프로그래머스에서 Node.js 수업을 들었던 터라 어느 정도 자신감도 있었다.&lt;/p&gt;
&lt;h3&gt;일단 크롤링으로 스타트&lt;/h3&gt;
&lt;p&gt;처음은 무척 간단했다. 당시 이터널 리턴 홈페이지에는 몇 일 단위로 갱신되는 스프레드시트가 있었는데, 이 내용을 크롤링해서 DB로 저장한 다음, OP.GG처럼 티어를 붙여서 깔끔하게 보여주는 정도였다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/142683eabc7e071b3f6f658137f06b55/93582/early-stats.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACUUlEQVQ4y5WSWW/TUBCF/dcRj6htQM1OU+ChSBVSN8ETUFUCooY6cRZIncSpnX1zFje142wHnYFE0DeudDPJnZkz38xEqdVqaDQaeHx6vR56vS48z8X/HOXk9AyJw9fYD4YQjsYRDEWwHwzLle+h3zYSjSMciUmM2Ej0j/33KoHYMaJHHxF9+xl7L88QOfqE+PEVnuy8wm78DC8O3yNwcI7d+CkCiQvsxE4QOLjA0703eBZ+t/Uz93niAsrV5QdU9DTux3XclVS4Tgu+24fdreBHLomGWUA28wWdRhGmkUW/rcOsaNB/pqCmLmEamtimVUBFV6FM7x3pfTwaIvntK+6qBvyZh+ViDqNShuNMUK9ZWC4WGA5tYL3CZDKWN/XmOxr1GjQtA9seSLzSbDaxXC4xsG3cqCp8f47FYgHX9WBZNQyHQxjVKh4eHmRRnjeDbdswTROapsGyLLGdTgelUgnKbDYTwtFohGw2Cxbg1qfTKer1OsbjsSR5nofBYADf9+WN/w7GM6ZQKKDb7aJarUIpFouYz+dSNZ1Oi+UlESlYiNZ1XSEkAN8olMlkRDiXywlhuVyGwg9WZGupVEpI1uu1JNLHZMMwRJAiG0J2oaqqFKOlIOEUOijCxOvra3EwiZeCk8lEWmFMq9WS+W5aJiGLsHXS67oOpd1uY7VayXw43H6/L2IkfNwyY+ljN5wrR/R3y7e3t1CozBmShERMYhCXQksaUpCQxVho80ahjeB2KaTjcRwHyWRy2yYTOQ4mk5C/ScbiG8F8Pi8x3DLBKPgLbOqiM4lCcK4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Early Stats&quot;
        title=&quot;Early Stats&quot;
        src=&quot;/static/142683eabc7e071b3f6f658137f06b55/f058b/early-stats.png&quot;
        srcset=&quot;/static/142683eabc7e071b3f6f658137f06b55/c26ae/early-stats.png 158w,
/static/142683eabc7e071b3f6f658137f06b55/6bdcf/early-stats.png 315w,
/static/142683eabc7e071b3f6f658137f06b55/f058b/early-stats.png 630w,
/static/142683eabc7e071b3f6f658137f06b55/40601/early-stats.png 945w,
/static/142683eabc7e071b3f6f658137f06b55/78612/early-stats.png 1260w,
/static/142683eabc7e071b3f6f658137f06b55/93582/early-stats.png 1524w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e105fea6c88f353eaabe7516463a3cab/bb051/early-bser-fun.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 81.64556962025317%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVQ4y5VUTW/aQBD1T+kHpOz3rr0Yr8FgB4cmIi1q1EhJ1bSXSM2hyq05Vb31d79oFoyECig9PA3aYd68+XJSVRUWiwXG4zGEEJBSbu1hCAghoZWAtwJKaRitoZRC4r2PZHk+3CEjewid3yiJzAhIpWDMhpCcWmv0+n30+iew1sI5F52HkKZpjHEuhVQ6JlDaQUqNhByMMVytPuDu5hqciy0h+fbBGLNjCVUQyFKJhAJfvX6Dp58/8PfpMaokBZSEyuKc/wOqglR1ljGOy7aH3DMkpGY4HCJ3KXJrkXkP6iu9HYLf/GcNevMIhUeWWiQ5kY1GuFl9xMPXW4yKgKZpUBQFQgh7Udd1HORsNkNZljHm+7VBU1kkJFs7h/My4HM9hSKVaRrL/h84l8EYi0RJibeM4/60we9FixOl4LMs9urQ2hBBN22KZ5zjTEpkUqyHQpOdjAPOmioSHVuZY6ABJVop9AYM35Yt/jzcoc84yhCOXsyOQhIkBOZKIZObtaGHSTFCHYooX2/O6MXKiFyKWH4kHHCGZXuB28sVtLVxHY6dXrf4cQ+JkDP0R3Nw47oeMsymNc7fX2wXtuvJPnQVdDa2x2bxDNc9fMdxf9Xi15dF/J06e/SL0yXcJhYcg+EUQtu1QiYElrMSn+YVuJBwm5N6OaEA85NI+AwcyfdgnY6sGAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Early bser.fun&quot;
        title=&quot;Early bser.fun&quot;
        src=&quot;/static/e105fea6c88f353eaabe7516463a3cab/f058b/early-bser-fun.png&quot;
        srcset=&quot;/static/e105fea6c88f353eaabe7516463a3cab/c26ae/early-bser-fun.png 158w,
/static/e105fea6c88f353eaabe7516463a3cab/6bdcf/early-bser-fun.png 315w,
/static/e105fea6c88f353eaabe7516463a3cab/f058b/early-bser-fun.png 630w,
/static/e105fea6c88f353eaabe7516463a3cab/40601/early-bser-fun.png 945w,
/static/e105fea6c88f353eaabe7516463a3cab/bb051/early-bser-fun.png 1212w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;초기 개발 스택으로는 서버에 Javascript 기반의 &lt;strong&gt;Node&lt;/strong&gt;, 그리고 크롤링에 &lt;strong&gt;Python&lt;/strong&gt;을 사용했다. 웹사이트 개발은 내 친구가 맡아줬는데, 제일 무난한 &lt;strong&gt;React&lt;/strong&gt;를 사용했다.&lt;/p&gt;
&lt;p&gt;당시에 나는 인프라에 대한 지식이 거의 전무한 상태여서, 우선 한 번 이름을 들어보기도 하고, 쓰기 편해보이는 &lt;strong&gt;Heroku&lt;/strong&gt;를 사용했다. DB로는 &lt;strong&gt;MongoDB&lt;/strong&gt;를 사용했다.&lt;/p&gt;
&lt;p&gt;도메인은 다른 사이트들이 그렇듯 &lt;code class=&quot;language-text&quot;&gt;gg&lt;/code&gt; 도메인을 쓰려고 했다. 근데 가격이 무슨 15만원이나 해서 결국 싸고 저렴한 &lt;code class=&quot;language-text&quot;&gt;fun&lt;/code&gt; 도메인을 쓰기로 했다. 그렇게 정해진 도메인 이름은 &lt;strong&gt;BSER.FUN&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;사이트를 만들었으니 홍보도 해야지 싶었다. 공식 디스코드가 있는데 그쪽에서 사이트를 홍보했다. 디씨인사이드 갤러리에서 글을 작성하기도 했다. 트위치에서 스트리머들이 방송하는 곳에 찾아가서 채팅으로 홍보하기도 했다. 나는 사실 이런 쪽에는 자신이 없어서 대부분 친구에게 맡겼는데.. 홍보는 일단 지르고 봐야되겠구나 싶었다.&lt;/p&gt;
&lt;p&gt;이 당시 개발 히스토리를 따로 상세하기 남겨놓지는 못했고 간단한 타임라인만 남겼는데, 그 내용은 아래와 같다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;11월 10일: 사이트 오픈. 캐릭터 통계 목록과 상세 정보 페이지 추가.&lt;/li&gt;
&lt;li&gt;11월 20일: 상세 페이지에 캐릭터별 추천 빌드 추가, 일간 방문자 수 70 → &lt;strong&gt;359명&lt;/strong&gt;으로 약 5배 증가&lt;/li&gt;
&lt;li&gt;12월 6일: 전적 검색 추가. 일간 방문자 수 347 → &lt;strong&gt;4614명&lt;/strong&gt;으로 약 13.3배 증가. 이후 일간 방문자 수 4000명대 유지.&lt;/li&gt;
&lt;li&gt;12월 13일: 늘어난 사용자로 인한 장애 (동시접속자 수 100명 대에서 다운)
&lt;ul&gt;
&lt;li&gt;디자인 개선, 안정성 높이는 작업 진행 (Heroku → AWS)&lt;/li&gt;
&lt;li&gt;도네이션 페이지 추가&lt;/li&gt;
&lt;li&gt;디씨인사이드 홍보로 일간 방문자 수 &lt;strong&gt;7377명&lt;/strong&gt; 달성.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;사이트는 무척 순항하고 있었다. 이대로 광고만 붙일 수 있다면 부자가 될 수 있겠다! 싶었지만..&lt;/p&gt;
&lt;h3&gt;공식 API 등장&lt;/h3&gt;
&lt;p&gt;공식 API가 등장했다. 기존의 전적 검색은 공식 홈페이지에서 사용하던 서버에 직접 요청을 날려서 오는 응답을 나름대로 파싱해서 보여주는 방식이었다. (개발자 도구로 어떤 식으로 요청을 보내야 원하는 응답이 오는지 확인할 수 있었다.) 통계도 그렇고, 랭킹도 그렇고, 사실상 우리는 기존에 있는 것들을 정제했을 뿐이었다.&lt;/p&gt;
&lt;p&gt;공식 API가 있다는 건 이제 &lt;strong&gt;전적 데이터를 가지고 직접 통계를 뽑을 수 있다&lt;/strong&gt;는 얘기였다. 물론, 그만한 인프라가 받쳐줬을 때 얘기지만..&lt;/p&gt;
&lt;p&gt;데이터를 집계하는 작업은 기본적으로 시간이 오래 걸리는 작업이다. MongoDB -&gt; MySQL로 이전하면서 데이터를 다루기는 조금 더 편해졌지만, 실제 사이트에서 사용하는 DB로 30초가 넘어가는 쿼리를 실행하기에는 무리가 있었다.&lt;/p&gt;
&lt;p&gt;더구나 전적을 쌓기 위해서는 &lt;strong&gt;요청을 받는 서버와는 상관없는 별도의 워커&lt;/strong&gt;가 필요했다. 전적 갱신을 하면서도 클라이언트의 요청은 받아야 하고, 서버가 여러 대가 되더라도 동일한 유저의 전적을 중복으로 갱신해서는 안된다. 이 때 AWS의 &lt;strong&gt;Elastic Beanstalk&lt;/strong&gt;으로 서버를 두 대 띄웠는데, 저 중복 갱신 문제때문에 정신 나가는 줄 알았다..&lt;/p&gt;
&lt;p&gt;관련 경험이 없어서 맨땅에 헤딩하는 느낌으로 하나하나 해결해야 했다. 당연히 시간은 오래 걸릴 수 밖에 없었다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;조금 나중의 이야기이지만, 데이터 분석을 위해서 이후 &lt;strong&gt;AWS Redshift&lt;/strong&gt;와 같은 분석용 DB를 데이터 웨어하우스로 만들고, &lt;strong&gt;Airflow&lt;/strong&gt;를 활용해 주기적으로 프로덕션 DB에서 분석용 DB로 복사하는 태스크를 만들었다. 데이터 엔지니어링에 대해서는 완전히 무지한 상태였는데, 프로그래머스에서 들었던 &lt;a href=&quot;https://programmers.co.kr/learn/courses/12916&quot;&gt;관련 강의&lt;/a&gt;가 무척 도움이 되었다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;마찬가지로 몇 개월 후의 이야기이지만, 전적 갱신은 &lt;strong&gt;Redis&lt;/strong&gt;를 활용해서 해결했다. 일반적으로 Redis는 캐싱에 주로 사용되지만, Redis의 데이터 구조를 적절히 활용하면 메시지 큐처럼 활용할 수도 있다. 기술적인 내용에 대해서 궁금하다면 &lt;a href=&quot;https://blog.slashuniverse.com/7?category=993311&quot;&gt;이 포스트&lt;/a&gt;를 참고하면 될 것 같다. 간간히 친구와 같이 작성하는 기술 블로그다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;경쟁 사이트 출현&lt;/h3&gt;
&lt;p&gt;설상가상으로, 공식 API에 대응하는 와중 경쟁 사이트가 생겨나기 시작했다. 여러 가지 사이트가 있었지만 대표적인 건 &lt;a href=&quot;https://dak.gg/bser&quot;&gt;닥지지&lt;/a&gt;와 &lt;a href=&quot;https://aya.gg&quot;&gt;아야지지&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;닥지지는 우선 개발 속도가 무척 빨랐다. 우리가 기능 하나 추가할 때 얘네는 3~4개씩 추가하는 식이었다. 나중에 알고봤더니 닥지지가 이터널 리턴 API를 만드는 회사였더라..&lt;/p&gt;
&lt;p&gt;아야지지는 퀄리티가 상당했다. 이쪽은 혼자 개발하는 것 같은데 우리가 구상하고 실제로 개발할 엄두가 안났던 기능들이 이쪽에는 이미 추가되어 있었다.&lt;/p&gt;
&lt;h3&gt;현실적인 문제들&lt;/h3&gt;
&lt;p&gt;마지막으로.. 우리에게는 현실적인 문제들도 있었다.&lt;/p&gt;
&lt;p&gt;시간이 부족했다. 친구와 함께 둘이서 만들었지만, 둘 다 본업이 있었고 여기에 전력을 쏟을 수 없는 상황이었다.&lt;/p&gt;
&lt;p&gt;돈도 부족했다. RDS, Elastic Beanstalk 등 인프라를 유지하는 데만 매달 20~30만원 정도의 비용이 소모됬다. 애드센스라도 붙이면 어떻게든 할 수 있지 않을까 싶었는데, 4번 정도 승인 실패를 받으니까 힘이 쭉 빠지더라.&lt;/p&gt;
&lt;p&gt;이런 저런 이유로 우리는 개발을 중단하기로 했다. 아쉽지만 사이트를 처음부터 끝까지 만들어본 값진 경험을 했다고 생각하고, 다음 날 서버를 내리기로 했는데…&lt;/p&gt;
&lt;h2&gt;OP.GG에서 연락이..?&lt;/h2&gt;
&lt;p&gt;OP.GG에서 연락이 왔다. 우리 사이트에 관심이 있어서 연락했는데, 한 번 만나서 이야기했으면 좋겠다는 이야기였다. 아니, 진짜 내가 아는 그 OP.GG? 거기서 연락이 왔다고? 처음에는 잘 믿기지가 않아서 메일을 보내신 분의 이름을 구글링해보기도 했다. 진짜였다!&lt;/p&gt;
&lt;p&gt;만나서 얘기를 해봤는데, 우리 사이트를 사고싶다고 한다. 거기에 입사 제안까지 받았다. 😮😮😮&lt;/p&gt;
&lt;p&gt;사실 알게 모르게 사이트를 만들면서 애정이 많이 쌓였다. 현실적인 문제로 개발을 중단하자고 마음먹었을 때 무척 아쉬웠다. 나로서는 거부하고 싶지 않은 제안이었다. 이직을 생각하고 있기도 했고 말이다.&lt;/p&gt;
&lt;p&gt;그렇게 OP.GG에 합류해서, 지금은 &lt;a href=&quot;https://er.op.gg/&quot;&gt;er.op.gg&lt;/a&gt;로 이름을 바꾼 사이트를 개발하고 운영하고 있다.&lt;/p&gt;
&lt;h2&gt;마치면서&lt;/h2&gt;
&lt;p&gt;개발자라면 누구나 자신이 만든 서비스가 좋은 서비스이고, 많은 사람들이 사용하는 서비스이기를 바랄 것 같다. 그런 의미에서 처음부터 끝까지 사이트를 직접 만들고 운영해봤던 건 무척 값진 경험이었다.&lt;/p&gt;
&lt;p&gt;생각보다 깊은 기술적 이해도가 필요하지도 않았다. 기능이 몇 개 안되고 일간 방문자수가 고작 1000명대인 사이트에서 아키텍처나 최적화가 무슨 소용이 있을까? 더구나 혼자 개발하는데 말이다.&lt;/p&gt;
&lt;p&gt;중요한 건 일단 시작하고, 그리고 어떤 형태로든 마무리를 짓는 것 같다. 일단 만들어 놓으면, 관성이라는게 생기고 내 의지와는 상관없이 일이 굴러가기 시작한다.&lt;/p&gt;
&lt;p&gt;그런 의미에서, 마음 속으로만 생각하고 있던 사이드 프로젝트, 혹은 하다가 포기했던 그 프로젝트! 지금 바로 시작해보는 건 어떨까? 😵‍💫&lt;/p&gt;</content:encoded></item><item><title><![CDATA[2019년 돌아보기]]></title><description><![CDATA[생일을 맞이해서, 지난 1년을 돌아보는 시간을 가져봅니다. (주의: 글이 개판입니다. 그냥 재미로만 보세요.) 퇴사, 그리고 이직 지난…]]></description><link>https://turastory.com/retrospective-2019/</link><guid isPermaLink="false">https://turastory.com/retrospective-2019/</guid><pubDate>Sat, 11 Jan 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;생일을 맞이해서, 지난 1년을 돌아보는 시간을 가져봅니다. (주의: 글이 개판입니다. 그냥 재미로만 보세요.)&lt;/p&gt;
&lt;h3&gt;퇴사, 그리고 이직&lt;/h3&gt;
&lt;p&gt;지난 1월에는 이전에 다니던 회사에서 쫓겨났습니다. 성실하지 못한 태도 때문이었다고 생각하고 있습니다. 당시 이직을 고민하기는 했지만, 갑자기 나오게 될거라고 예상은 하지 못했기 때문에 조금 당황했습니다. 그리고 다음 번에는 반드시 자율 출퇴근을 하는 회사로 가리라 다짐했죠. (농담입니다..)&lt;/p&gt;
&lt;p&gt;어쨌든 그래서 약 2년간의 회사 생활을 마치고, 백수가 되었습니다. 참으로 생각이 많아지더군요. 일단 시간이 널널한 건 정말 최고였습니다. 하루 종일 게임을 하기도 하고, 평소에 보고싶었던 영화나 애니메이션을 챙겨보기도 했습니다.&lt;/p&gt;
&lt;p&gt;뭐 어쨌든, 그렇게 한 3개월을 놀면서 - 아예 놀지는 않았습니다.. 개발도 좀 하고, 공부도 좀 했어요.. - 했던 한 가지 활동이 한국 인공지능 연구소에서 진행하는 스터디에 참석하는 일이었습니다. 지금은 안드로이드 개발을 하고 있지만, 원래 꿈이 인공지능을 연구하는 것이었던 터라(구체적으로는 조금은 다르지만요) 어떤 방식으로든 인공지능에 대해 공부하고 알아가고 싶은 마음이 있었습니다. 거기서 만난 분을 통해서 지금 다니는 회사로 지원하게 되었고, 또 만족하면서 지내고 있으니 쉬는 동안 했던 일 중에서 그나마 제일 건설적인 일이 아니었나 싶습니다.&lt;/p&gt;
&lt;p&gt;Coursera의 Andrew Ng 교수님의 딥러닝 강의를 듣고, 개인적인 관심으로 강화 학습 관련 공부도 좀 하고 (이 당시에 Sung Kim 교수님이 유튜브에 올려놓은 강화 학습 강의와 David Silver의 영상을 봤던 기억이 납니다) 했는데, 돌이켜보면 뭐 하나 제대로 한 게 없는 것 같습니다 -ㅅ-; 딥러닝도 CNN은 공부했는데 RNN은 안하고, 강화 학습도 DQN은 공부했는데 알파고 논문은 안 읽어보고.. 참으로 후회가 됩니다 ㅠㅠ&lt;/p&gt;
&lt;p&gt;사실은 AI를 직접 연구하고 싶었지만, 전공자도 아니고 대학 수업도 한 번 들어본 적 없는 제가 Data Scientist로 지원하는 건 말도 안되는 일이었죠. 그래서 AI가 실제로 서비스에 활용되는 모습을 옆에서 지켜보고 싶다는 생각을 가지고, 안드로이드 개발자 포지션으로 뤼이드에 지원했습니다.&lt;/p&gt;
&lt;p&gt;솔직히 이야기하면 준비를 그렇게 많이 하지는 않았어요. 특히 알고리즘이나, 안드로이드 프레임워크의 심화적인 부분에 대한 내용은 준비를 별로 안했습니다. 다만 채용 공고를 정말 면밀하게 분석했던 것 같아요. 가령 “Rx에 대한 경험이 있는 분을 찾는다”라는 문장을 보고, 함수형 프로그래밍을 중요하게 생각할 것 같아서 포트폴리오에서 해당 내용을 강조하는 거죠. 지금 생각해보면 꽤나 현명했던 것 같습니다. 채용 공고를 작성하는 입장이 되어보니, 여기에 정말 내가 원하는, 혹은 되고자 하는 사람을 묘사하게 되더라구요.&lt;/p&gt;
&lt;p&gt;운이 좋게도 기술적인 부분보다는 제 생각을 많이 물어보셔서 다행이었고, 기술을 사용하는 이유에 포커싱을 하는 것 자체도 너무 마음에 들었습니다. 다만 과제를 할 때는.. 코틀린이나 Rx, Dagger를 프로덕션에서 써본 경험이 없고 그냥 사이드 프로젝트로 간단하게 써본 것이 전부라 일일히 공부하면서 개발했던 것이 꽤나 힘들었습니다. 원래 개발하던 대로 과제를 제출할 수도 있었겠지만, 뭐 그랬으면 떨어졌겠죠? 어쨌든 그렇게 다시 회사 생활을 시작했습니다.&lt;/p&gt;
&lt;p&gt;이 시간을 되돌아보면서 깨달은게 하나 있다면, 어떤 일이든 목적 의식을 부여하는 순간 괴로워진다는 사실입니다. 머리속에 떠오르는 아이디어들을 무작정 개발할 때는 정말 즐거웠지만, 다시 취업을 해야한다는 목적을 설정하는 순간, 머리가 아파지기 시작했습니다. 물론 단순한 생각이나 각오로는 달성하기 어려운 목표를 이루기 위해서 꼭 필요한 것이지만, 어떤 일을 시작하는 데에 있어 큰 장벽이 되는 것 같아서요.&lt;/p&gt;
&lt;h3&gt;공부&lt;/h3&gt;
&lt;p&gt;회사에 입사하고 나서는 계속 배워야했습니다. 자바를 쓰다가 코틀린을 쓰고, 콜백으로 비동기 처리를 하다가 Rx를 쓰니 단순히 기술을 배우는 수준이 아니라 패러다임을 전환해야 했습니다. 처음 코드 리뷰를 할 때는 다른 사람이 내 코드를 본다는 생각에 많이 긴장하기는 했는데, 몰랐던 지식을 통해서 코드가 발전되는 감각이나.. 기술에 대해서 각자의 관점을 가지고 이야기하는 경험이 너무 좋았습니다.&lt;/p&gt;
&lt;p&gt;그리고서 얼마간은 회사 일에 집중했던 것 같습니다. 배울 것도 많고, 백엔드, 프론트엔드, 디자이너, PM이 모여서 협업을 하는 것도 새로운 경험이었기에 즐거웠습니다. 도중에 Google I/O 2019 Viewing Party에 가서 친구랑 만나기도 하고, Compose가 나온 이후에는 Compose에 꽂혀서 발표도 하고, 참 여러 일들이 있었네요.&lt;/p&gt;
&lt;p&gt;11월 들어서는 새로운 프로젝트에 참여해서 기술적으로 많은 것들을 시도해볼 수 있었습니다. 프로덕션에 아직 써보지는 못했지만, MVI과 코루틴, 클린 아키텍처를 써보면서 과연 궁극의 아키텍처는 무엇인가.. 고민해보기도 했구요. 그동안 잘 파보지 못했던 안드로이드의 뷰 시스템에 대한 공부도 많이 했습니다.&lt;/p&gt;
&lt;p&gt;공부를 하면서 느낀 게 있다면, 역시 사람은 환경의 영향을 많이 받는다는 사실입니다. 저는 천성이 게을러서 무언가 위기가 닥치지 않으면 몸을 잘 움직이지 않는 성격인데, 입사를 해야하고 새로운 것들을 배워야 하는 상황에 놓이니까 어쩔 수 없이 움직이게 되더라구요. 공부를 할 때 주로 카페에 가서 하는 이유기도 합니다. 의지가 부족하다면 환경을 내가 움직일 수밖에 없도록 조정하는 거죠.&lt;/p&gt;
&lt;h3&gt;복싱&lt;/h3&gt;
&lt;p&gt;운동을 해야겠다고 생각은 하고 있었는데, 헬스는 이전에도 몇 번 했다가 때려친 적이 있어서 좀 색다르고 재미있는 걸 해보려고 했습니다. 후보에는 보드(스케이드 보드, 롱보드), 파쿠르, 복싱이 있었는데 어쩌다 보니 복싱을 하게 됬네요.&lt;/p&gt;
&lt;p&gt;대략 9월부터 시작한 복싱은 이제 한 4개월이 넘어 갑니다. 처음 시작할 때는 너무 가기 싫더니 한두달 되고 회원분들과 친해지니까 꾸준히 운동을 하게 되었습니다. 이직한 걸 제외하고는 지난 한 해 동안 가장 잘한 일 아니었을까 생각이 듭니다.&lt;/p&gt;
&lt;p&gt;여러 가지를 느꼈지만 그 중 한 가지는, 투자한 만큼 관심을 쏟게 된다는 거였는데.. 매 달 20만원씩 나간다고 생각하니 억지로라도 나가게 됩니다. 다른 하나는 관성입니다. 두 달 정도가 지나고 습관이 되니까 그냥 아무 생각 없이 나가게 되더라구요.&lt;/p&gt;
&lt;p&gt;사실 뭘 하든 그냥 아무 생각 없이 하는게 제일 좋은 것 같습니다. 하기 싫다거나 하고 싶다거나 이렇게 감정이 큰 건 좋지 않아요. 하기 싫다고 생각하면 당연히 더 하기 싫어지고, 하고 싶다는 감정은 그리 오래 가지 않으니 이 감정에 의존해서 동기를 부여받으면 그 감정이 사라졌을 때 지속하기가 어렵습니다.&lt;/p&gt;
&lt;p&gt;건강에 대해서도 조금 이야기를 해봐야겠네요. 사실 운동을 시작했던 계기 중 하나는 건강이었는데, 운동을 통해서 건강이 크게 좋아진 것 같다는 생각은 안 듭니다. 그보다는 규칙적으로 생활했던 게 큰 역할을 했던 것 같아요. 꼭 일찍 자는 게 아니더라도 비슷한 시간에 자고 비슷한 시작에 일어나는 게 건강에 큰 영향을 미치는 것 같습니다.&lt;/p&gt;
&lt;p&gt;좋은 취미를 만든 만큼, 복싱은 2020년에도 꾸준히 이어가고 싶습니다.&lt;/p&gt;
&lt;h3&gt;아쉬운 것들&lt;/h3&gt;
&lt;p&gt;아쉬운 걸 생각하면 정말 끝도 없죠. 그런데 되돌아보니 이것들을 관통하는 하나의 주제가 있었습니다. 어느 하나 제대로 완결짓지 못했다는 거죠.&lt;/p&gt;
&lt;p&gt;취미를 예로 들어보면, 스케이트 보드는 사고 나서 한 달을 못 갔습니다. 큐브도 두 달정도 하다가 그만 뒀습니다. 소설 쓰기도 개요를 짜고 처음 몇 페이지를 써봤는데, 이것도 며칠 못 갔습니다. 그 외에 마술, 일렉 기타, 게임 개발, 사이드 프로젝트 등등, 이게 원래 새로운 것들을 시도해볼 때의 일반적인 패턴인지는 모르겠지만, “이걸 해봤다”라고 말하기 어려울 정도에서 그만 두는 건 22년동안 계속 됬던 패턴이라서, 좀 답답하네요.&lt;/p&gt;
&lt;p&gt;이게 반복되다 보니 무슨 일을 시작할 때도 망설이게 되고, 확신이 없는 상태에서는 시작조차 하지 않으려는 습관이 생긴 것 같습니다.&lt;/p&gt;
&lt;p&gt;2020년에는 이 습관을 뜯어 고치는게 목표입니다. 복싱을 하다가 느낀건데, 어떤 일이든 처음 시작할 때는 잘 안되고 재미가 없지만 두 세달 정도가 지나서 숙달이 되면 재미가 붙는 것 같아요. 구체적으로 어떤 걸 하게 될지는 모르겠지만, 1년 후에 올해는 이런 것들을 했다고 자신있게 이야기할 수 있었으면 좋겠습니다.&lt;/p&gt;
&lt;h3&gt;마무리&lt;/h3&gt;
&lt;p&gt;2020년에 뭘 할지는 또 다른 글에서 다루고, 회고는 대충 이렇게 끝내야겠습니다.&lt;/p&gt;
&lt;p&gt;두서없는 글 읽어주셔서 감사합니다. 이 글을 설마 여기까지 보시는 분이, 혹시나 계신다면 회고 한 번 해보세요. 생각 정리도 되고 아주 좋습니다.&lt;/p&gt;</content:encoded></item></channel></rss>