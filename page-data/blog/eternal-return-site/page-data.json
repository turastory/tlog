{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/eternal-return-site/","result":{"data":{"site":{"siteMetadata":{"title":"Alan'space"}},"markdownRemark":{"id":"8398fe3a-011f-56ca-8803-fb21f16c5eea","fields":{"slug":"/blog/eternal-return-site/"},"excerpt":"er.op.gg 사이트 작년 1…","html":"<p><em><a href=\"https://er.op.gg\">er.op.gg 사이트</a></em></p>\n<p>작년 10월, <strong>블랙서바이벌: 영원회귀</strong> - 지금은 <strong>이터널 리턴</strong>이라고 부르는 게임이 막 세상의 관심을 받던 시기. 당시 나는 산업기능요원 의무로 1달간 훈련소에 다녀와야 했는데, 훈련소에서 나오면 어떤 것들을 할지 곰곰히 생각을 해봤다.</p>\n<p>고민 끝에 내린 결론은 뭐든 간에 만드는 것보다 연구하는 걸 해보고 싶다는 생각이었다. 그렇게 생각했다.</p>\n<p>근데 막상 나오니까 또 생각이 바뀌더라. 경제적인 것들에 대한 관심과 함께 내가 만든 사이트나 제품으로 돈을 벌어보고 싶다는 욕심이 생겼다. 친구와 같이 이야기를 하면서, 이터널 리턴이라는 게임의 통계 사이트를 한 번 만들어보기로 했다. 경쟁 대상이 되는 사이트가 아직 존재하지 않았기 때문에 심리적인 부담도 그리 크지는 않았다.</p>\n<p>마침 훈련소에 가기 전 프로그래머스에서 Node.js 수업을 들었던 터라 어느 정도 자신감도 있었다.</p>\n<h3>일단 크롤링으로 스타트</h3>\n<p>처음은 무척 간단했다. 당시 이터널 리턴 홈페이지에는 몇 일 단위로 갱신되는 스프레드시트가 있었는데, 이 내용을 크롤링해서 DB로 저장한 다음, OP.GG처럼 티어를 붙여서 깔끔하게 보여주는 정도였다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/142683eabc7e071b3f6f658137f06b55/93582/early-stats.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACX0lEQVR42o1S224SURSdDze+qm01miYVNXKrSXmo+qKhPimaFAUHuQxaymVmYBAYBob7ZQZYnnVwGtMnz8s+Z+911l77oui6jnbbwu3TarWEv43ZdArP8/C/R0kmL3B2lkA4EkU8fopoLI5INIZwOIKotFFE/onRxv7eY7H9Pca7tKdQHoUSOHn1AY/D73Dw9BxPwu9xHE3izv0X8v3w+VscPXuDByfnOAzt7ZHw3T14iXvHCRHbx4k9DL2G8unjBX6VVUzcNvRaXpRoYzF38Nu6glbMwGhoyP+4RFPXUK8W0DLKqFZy+KlloGY+S5+a/QKjXsT1VQ7KwLFF5Tu4Qxvfs19hGjWslqJv6wVq11eYjIbC14DvLTFwethtPQyHDprCp2a/wWoZKORVGdMbVSjdrgAJSrvfx2U6jfXaw263w9rzYTabGI0n0HVD+vt9B/5mA9cdwTSbyOeF4pYlLWO1eh3KbDaT0xkMBkgLQk7XNE3M53M0Gg2MRiPUakL1agXbtuH7vlA4hGEYUFVV4guFgoxxY5RyuSyyr0WGvgxMxZpMJhMsFosbQgKXyyV6vZ5cIdd1YVkWcrmcJCwWizJWrYqS6aBKgkqlkiTabreSgCrG47FUzHen05GETMIdJb4p2kLCbre7JySIhARRLQlYHgmoLCBkImJZDX1USCIK0jRNKqyzh7zwOI6DbDYrP21E40lKIiYKCKkiKJnK2CISU8hNyXQQxKEwEwmZNRgKP9/uIbFMwqGQmL3kUKRCquHhx1QqhUqlIu9UGPSQQJZKoo1cG1cSBkMJpkwBfwDdo6LJu8x3dwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Early Stats\"\n        title=\"\"\n        src=\"/static/142683eabc7e071b3f6f658137f06b55/f058b/early-stats.png\"\n        srcset=\"/static/142683eabc7e071b3f6f658137f06b55/c26ae/early-stats.png 158w,\n/static/142683eabc7e071b3f6f658137f06b55/6bdcf/early-stats.png 315w,\n/static/142683eabc7e071b3f6f658137f06b55/f058b/early-stats.png 630w,\n/static/142683eabc7e071b3f6f658137f06b55/40601/early-stats.png 945w,\n/static/142683eabc7e071b3f6f658137f06b55/78612/early-stats.png 1260w,\n/static/142683eabc7e071b3f6f658137f06b55/93582/early-stats.png 1524w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e105fea6c88f353eaabe7516463a3cab/bb051/early-bser-fun.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.64556962025317%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9klEQVR42p1U207bQBD1pyBycexd767vdorjyOAEpFICCaC+0T70AamqKsRT+wP96tOZdaCqhK2mDyfj7KzPnpkza6eua7Rti7IsIYSAlPKfIAhGScRGIlAKWmsEQQAnz3NUVYU8y2iBNwc2cRihhjF7Qv5RdMJoPMZ06iKKIgte6wPnWRFHGShLFKiIooLDCd8XuLvZYLe5pLIlwtAMEhpj/o5aoSrpPVLr8MLR8Qi/fj7jx9cvmLgzRGFIh/i2p28hpDyX/RIlrV2tRogjH05MslPqX0ZJRpKmSJMEKcceJK/5LmaEskhsZdaUNMvxsNvi090OxXyO5XKJoiis82+B8/P9Po5lWeDzvca7UsPh8nQY4cOiwtVyAcUq4xjxgQijmPpJhIocOvZ8fF+1eGpquLQYD/SQe8busrPWZfrv0/qaRs7IvSnsbFNXOKtP7POQw33Qqhsfhx/GrofH3Xs8PdzD9aXt09BQc4kv88gkPOSnNIN/FNJDc0JNpuayfEOzeajCJBCdQu7hjPp1fX6J7fkFNA0rmzKkkOePX7ZzyNeUREyKUwhrCrGzAe3ZCut2/brRXqce6H0F3QdBdd+AMLXktoeTmcC3jxd43DaYet3VYyV9hHwgE3YHd4RetrD32ir0yNnbVY1NU0EE6j8JayLU+A1rqvnAh6HecAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Early bser.fun\"\n        title=\"\"\n        src=\"/static/e105fea6c88f353eaabe7516463a3cab/f058b/early-bser-fun.png\"\n        srcset=\"/static/e105fea6c88f353eaabe7516463a3cab/c26ae/early-bser-fun.png 158w,\n/static/e105fea6c88f353eaabe7516463a3cab/6bdcf/early-bser-fun.png 315w,\n/static/e105fea6c88f353eaabe7516463a3cab/f058b/early-bser-fun.png 630w,\n/static/e105fea6c88f353eaabe7516463a3cab/40601/early-bser-fun.png 945w,\n/static/e105fea6c88f353eaabe7516463a3cab/bb051/early-bser-fun.png 1212w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>초기 개발 스택으로는 서버에 Javascript 기반의 <strong>Node</strong>, 그리고 크롤링에 <strong>Python</strong>을 사용했다. 웹사이트 개발은 내 친구가 맡아줬는데, 제일 무난한 <strong>React</strong>를 사용했다.</p>\n<p>당시에 나는 인프라에 대한 지식이 거의 전무한 상태여서, 우선 한 번 이름을 들어보기도 하고, 쓰기 편해보이는 <strong>Heroku</strong>를 사용했다. DB로는 <strong>MongoDB</strong>를 사용했다.</p>\n<p>도메인은 다른 사이트들이 그렇듯 <code class=\"language-text\">gg</code> 도메인을 쓰려고 했다. 근데 가격이 무슨 15만원이나 해서 결국 싸고 저렴한 <code class=\"language-text\">fun</code> 도메인을 쓰기로 했다. 그렇게 정해진 도메인 이름은 <strong>BSER.FUN</strong>.</p>\n<p>사이트를 만들었으니 홍보도 해야지 싶었다. 공식 디스코드가 있는데 그쪽에서 사이트를 홍보했다. 디씨인사이드 갤러리에서 글을 작성하기도 했다. 트위치에서 스트리머들이 방송하는 곳에 찾아가서 채팅으로 홍보하기도 했다. 나는 사실 이런 쪽에는 자신이 없어서 대부분 친구에게 맡겼는데.. 홍보는 일단 지르고 봐야되겠구나 싶었다.</p>\n<p>이 당시 개발 히스토리를 따로 상세하기 남겨놓지는 못했고 간단한 타임라인만 남겼는데, 그 내용은 아래와 같다.</p>\n<ul>\n<li>11월 10일: 사이트 오픈. 캐릭터 통계 목록과 상세 정보 페이지 추가.</li>\n<li>11월 20일: 상세 페이지에 캐릭터별 추천 빌드 추가, 일간 방문자 수 70 → <strong>359명</strong>으로 약 5배 증가</li>\n<li>12월 6일: 전적 검색 추가. 일간 방문자 수 347 → <strong>4614명</strong>으로 약 13.3배 증가. 이후 일간 방문자 수 4000명대 유지.</li>\n<li>12월 13일: 늘어난 사용자로 인한 장애 (동시접속자 수 100명 대에서 다운)\n<ul>\n<li>디자인 개선, 안정성 높이는 작업 진행 (Heroku → AWS)</li>\n<li>도네이션 페이지 추가</li>\n<li>디씨인사이드 홍보로 일간 방문자 수 <strong>7377명</strong> 달성.</li>\n</ul>\n</li>\n</ul>\n<p>사이트는 무척 순항하고 있었다. 이대로 광고만 붙일 수 있다면 부자가 될 수 있겠다! 싶었지만..</p>\n<h3>공식 API 등장</h3>\n<p>공식 API가 등장했다. 기존의 전적 검색은 공식 홈페이지에서 사용하던 서버에 직접 요청을 날려서 오는 응답을 나름대로 파싱해서 보여주는 방식이었다. (개발자 도구로 어떤 식으로 요청을 보내야 원하는 응답이 오는지 확인할 수 있었다.) 통계도 그렇고, 랭킹도 그렇고, 사실상 우리는 기존에 있는 것들을 정제했을 뿐이었다.</p>\n<p>공식 API가 있다는 건 이제 <strong>전적 데이터를 가지고 직접 통계를 뽑을 수 있다</strong>는 얘기였다. 물론, 그만한 인프라가 받쳐줬을 때 얘기지만..</p>\n<p>데이터를 집계하는 작업은 기본적으로 시간이 오래 걸리는 작업이다. MongoDB -> MySQL로 이전하면서 데이터를 다루기는 조금 더 편해졌지만, 실제 사이트에서 사용하는 DB로 30초가 넘어가는 쿼리를 실행하기에는 무리가 있었다.</p>\n<p>더구나 전적을 쌓기 위해서는 <strong>요청을 받는 서버와는 상관없는 별도의 워커</strong>가 필요했다. 전적 갱신을 하면서도 클라이언트의 요청은 받아야 하고, 서버가 여러 대가 되더라도 동일한 유저의 전적을 중복으로 갱신해서는 안된다. 이 때 AWS의 <strong>Elastic Beanstalk</strong>으로 서버를 두 대 띄웠는데, 저 중복 갱신 문제때문에 정신 나가는 줄 알았다..</p>\n<p>관련 경험이 없어서 맨땅에 헤딩하는 느낌으로 하나하나 해결해야 했다. 당연히 시간은 오래 걸릴 수 밖에 없었다.</p>\n<blockquote>\n<p>조금 나중의 이야기이지만, 데이터 분석을 위해서 이후 <strong>AWS Redshift</strong>와 같은 분석용 DB를 데이터 웨어하우스로 만들고, <strong>Airflow</strong>를 활용해 주기적으로 프로덕션 DB에서 분석용 DB로 복사하는 태스크를 만들었다. 데이터 엔지니어링에 대해서는 완전히 무지한 상태였는데, 프로그래머스에서 들었던 <a href=\"https://programmers.co.kr/learn/courses/12916\">관련 강의</a>가 무척 도움이 되었다.</p>\n</blockquote>\n<blockquote>\n<p>마찬가지로 몇 개월 후의 이야기이지만, 전적 갱신은 <strong>Redis</strong>를 활용해서 해결했다. 일반적으로 Redis는 캐싱에 주로 사용되지만, Redis의 데이터 구조를 적절히 활용하면 메시지 큐처럼 활용할 수도 있다. 기술적인 내용에 대해서 궁금하다면 <a href=\"https://blog.slashuniverse.com/7?category=993311\">이 포스트</a>를 참고하면 될 것 같다. 간간히 친구와 같이 작성하는 기술 블로그다.</p>\n</blockquote>\n<h3>경쟁 사이트 출현</h3>\n<p>설상가상으로, 공식 API에 대응하는 와중 경쟁 사이트가 생겨나기 시작했다. 여러 가지 사이트가 있었지만 대표적인 건 <a href=\"https://dak.gg/bser\">닥지지</a>와 <a href=\"https://aya.gg\">아야지지</a>.</p>\n<p>닥지지는 우선 개발 속도가 무척 빨랐다. 우리가 기능 하나 추가할 때 얘네는 3~4개씩 추가하는 식이었다. 나중에 알고봤더니 닥지지가 이터널 리턴 API를 만드는 회사였더라..</p>\n<p>아야지지는 퀄리티가 상당했다. 이쪽은 혼자 개발하는 것 같은데 우리가 구상하고 실제로 개발할 엄두가 안났던 기능들이 이쪽에는 이미 추가되어 있었다.</p>\n<h3>현실적인 문제들</h3>\n<p>마지막으로.. 우리에게는 현실적인 문제들도 있었다.</p>\n<p>시간이 부족했다. 친구와 함께 둘이서 만들었지만, 둘 다 본업이 있었고 여기에 전력을 쏟을 수 없는 상황이었다.</p>\n<p>돈도 부족했다. RDS, Elastic Beanstalk 등 인프라를 유지하는 데만 매달 20~30만원 정도의 비용이 소모됬다. 애드센스라도 붙이면 어떻게든 할 수 있지 않을까 싶었는데, 4번 정도 승인 실패를 받으니까 힘이 쭉 빠지더라.</p>\n<p>이런 저런 이유로 우리는 개발을 중단하기로 했다. 아쉽지만 사이트를 처음부터 끝까지 만들어본 값진 경험을 했다고 생각하고, 다음 날 서버를 내리기로 했는데…</p>\n<h2>OP.GG에서 연락이..?</h2>\n<p>OP.GG에서 연락이 왔다. 우리 사이트에 관심이 있어서 연락했는데, 한 번 만나서 이야기했으면 좋겠다는 이야기였다. 아니, 진짜 내가 아는 그 OP.GG? 거기서 연락이 왔다고? 처음에는 잘 믿기지가 않아서 메일을 보내신 분의 이름을 구글링해보기도 했다. 진짜였다!</p>\n<p>만나서 얘기를 해봤는데, 우리 사이트를 사고싶다고 한다. 거기에 입사 제안까지 받았다. 😮😮😮</p>\n<p>사실 알게 모르게 사이트를 만들면서 애정이 많이 쌓였다. 현실적인 문제로 개발을 중단하자고 마음먹었을 때 무척 아쉬웠다. 나로서는 거부하고 싶지 않은 제안이었다. 이직을 생각하고 있기도 했고 말이다.</p>\n<p>그렇게 OP.GG에 합류해서, 지금은 <a href=\"https://er.op.gg/\">er.op.gg</a>로 이름을 바꾼 사이트를 개발하고 운영하고 있다.</p>\n<h2>마치면서</h2>\n<p>개발자라면 누구나 자신이 만든 서비스가 좋은 서비스이고, 많은 사람들이 사용하는 서비스이기를 바랄 것 같다. 그런 의미에서 처음부터 끝까지 사이트를 직접 만들고 운영해봤던 건 무척 값진 경험이었다.</p>\n<p>생각보다 깊은 기술적 이해도가 필요하지도 않았다. 기능이 몇 개 안되고 일간 방문자수가 고작 1000명대인 사이트에서 아키텍처나 최적화가 무슨 소용이 있을까? 더구나 혼자 개발하는데 말이다.</p>\n<p>중요한 건 일단 시작하고, 그리고 어떤 형태로든 마무리를 짓는 것 같다. 일단 만들어 놓으면, 관성이라는게 생기고 내 의지와는 상관없이 일이 굴러가기 시작한다.</p>\n<p>그런 의미에서, 마음 속으로만 생각하고 있던 사이드 프로젝트, 혹은 하다가 포기했던 그 프로젝트! 지금 바로 시작해보는 건 어떨까? 😵‍💫</p>","frontmatter":{"date":"2021-12-18","title":"이터널 리턴 전적 검색 사이트를 만들어보았다","description":"ER.OP.GG - 이터널 리턴 전적 검색 사이트를 만들어보았다.","category":"blog","tags":["retrospective","experience"]}},"previous":{"fields":{"slug":"/blog/retrospective-2019/"},"frontmatter":{"title":"2019년 돌아보기"}},"next":{"fields":{"slug":"/snippets/kotlin-spring-data-jpa-with-set/"},"frontmatter":{"title":"Kotlin 환경에서 Spring Data JPA를 사용할 때 Entity에서 Set 사용 시 ClassCastException 문제"}}},"pageContext":{"id":"8398fe3a-011f-56ca-8803-fb21f16c5eea","category":"blog","tags":["retrospective","experience"],"previousPostId":"1debf597-156e-59aa-bb72-12c3137e9fc2","nextPostId":"9314ea63-451c-5cd2-80df-c5390ddaf848"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}